<div class="table-container">
  <h1>User Data Table</h1>

  @if (isLoading()) {
    <div class="loading">
      <p>Duke ngarkuar te dhenat...</p>
    </div>
  }

  @if (error() && !isLoading()) {
    <div class="error">
      <p>{{ error() }}</p>
      <button (click)="loadUsers()" class="retry-button">Provo perseri</button>
    </div>
  }

  @if (!isLoading() && !error()) {
    <div class="search-box">
      <input
        type="text"
        [value]="searchTerm()"
        (input)="onSearchChange($any($event.target).value)"
        placeholder="Kerko sipas emrit..."
        class="search-input"
      />
    </div>

    @if (filteredUsers().length === 0) {
      <div class="no-results">
        <p>Nuk u gjeten rezultate per "{{ searchTerm() }}"</p>
      </div>
    } @else {
      <div class="table-wrapper">
        <table class="data-table">
          <thead>
            <tr>
              <th>Emri</th>
              <th>Email</th>
              <th>Telefoni</th>
            </tr>
          </thead>
          <tbody>
            @for (user of filteredUsers(); track user.id) {
              <tr>
                <td>{{ user.name }}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.phone }}</td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    }
  }
</div>